[{"/home/michael/code/myf0t0/myf0t0/src/index.js":"1","/home/michael/code/myf0t0/myf0t0/src/App.js":"2"},{"size":155,"mtime":1615347165888,"results":"3","hashOfConfig":"4"},{"size":9693,"mtime":1615861514958,"results":"5","hashOfConfig":"4"},{"filePath":"6","messages":"7","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"8"},"12rpndu",{"filePath":"9","messages":"10","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"11"},"/home/michael/code/myf0t0/myf0t0/src/index.js",[],["12","13"],"/home/michael/code/myf0t0/myf0t0/src/App.js",["14","15","16","17","18","19"],"import React from 'react';\nimport './index.css';\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\n\nvar AmazonCognitoIdentity = require('amazon-cognito-auth-js');\n\n// define the config for the Auth JS SDK\nvar authData = {\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\n  AppWebDomain: process.env.REACT_APP_COGNITO_APP_DOMAIN,\n  TokenScopesArray: process.env.REACT_APP_COGNITO_SCOPES.split(\",\"),\n  RedirectUriSignIn: process.env.REACT_APP_COGNITO_SIGN_IN_REDIRECT_URI,\n  RedirectUriSignOut: process.env.REACT_APP_COGNITO_SIGN_OUT_REDIRECT_URI,\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID\n}\n\nclass Header extends React.Component {\n  constructor(props){\n    super(props);\n  }\n\n  handleNavClick=(view)=>{\n    this.props.navHandler(view);\n  }\n\n  render() {\n    return (<div className=\"header\">\n      <NavButton view=\"Photos\" navClickHandler={this.handleNavClick} />\n      <NavButton view=\"Galleries\" navClickHandler={this.handleNavClick} />\n      <NavButton view=\"Settings\" navClickHandler={this.handleNavClick} />\n    </div>);\n  }\n}\n\nclass NavButton extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.handleNav = this.handleNav.bind(this);\n  }\n\n  handleNav(e){\n    this.props.navClickHandler(this.props.view)\n  }\n\n  render() {\n    return (\n      <span onClick={this.handleNav}> {this.props.view} </span>\n    )\n  }\n}\n\nclass Content extends React.Component {\n  constructor(props){\n    super(props);\n  }\n\n  render(){\n    return (\n      <div className=\"content\">\n        {this.props.view === \"Photos\" && <PhotoFlow jwt={this.props.jwt}/>}\n        {this.props.view === \"Galleries\" && <Galleries />}\n        {this.props.view === \"Settings\" && <Settings />}\n      </div>\n  )\n  }\n}\n\nclass PhotoDetailModal extends React.Component{\n  constructor(props){\n    super(props);\n  }\n\n  render(){\n    console.log(this.props)\n    var photoName = \"\"\n    if (\"SK\" in this.props.photo){\n      photoName = this.props.photo.SK.split(\"_\")[1];\n    }\n\n    return (\n      <Modal\n      {...this.props}\n      //size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      dialogClassName=\"photo-modal\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          {photoName}\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <img className=\"focus-photo\" src={this.props.photo.signed_url} alt=\"\" />\n      </Modal.Body>\n      <Modal.Footer>\n        <Button onClick={this.props.onHide}>Close</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n  }\n}\nclass PhotoFlow extends React.Component {\n  constructor(props){\n    super(props);\n    this.handleFilterUpdate = this.handleFilterUpdate.bind(this)\n    this.handlePhotoFocus = this.handlePhotoFocus.bind(this)\n    this.closePhotoFocus = this.closePhotoFocus.bind(this)\n    this.getThumbnails = this.getThumbnails.bind(this)\n    this.state = {photos:{}, focusPhoto:{}, focusModalVisible:false}\n  }\n\n  handleFilterUpdate(filter_params){\n    //console.log(filter_params);\n\n    this.getThumbnails(filter_params)\n  }\n\n  handlePhotoFocus(photo){\n    this.setState({focusPhoto: photo, focusModalVisible: true});\n  }\n\n  closePhotoFocus(){\n    this.setState({focusModalVisible: false});\n  }\n\n  componentDidMount(){\n    this.getThumbnails({});\n  }\n\n  async getThumbnails(params){\n    console.log(this.props.jwt);\n    if (this.props.jwt){\n      const requestOptions = {\n        mode: 'cors',\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: this.props.jwt\n        },\n        queryStringParameters: params\n      };\n      const url = process.env.REACT_APP_API_ENDPOINT + \"/photo\"\n      fetch(url, requestOptions)\n        .then(response => response.json())\n        .then(data => {\n          console.log(data)\n          this.setState({photos: data})\n        })\n        .catch(error => {\n          console.log(error.response);\n       });\n    } else {\n      console.log(\"No JWT Token yet.\");\n    }\n\n  }\n\n  render() {\n    //Assume a sorted list of photos has come back from the API.\n    var photo_groups = []\n    var curr_header = \"\"\n    var groups = 0\n    console.log(this.state.photos);\n    for(var i=0; i<this.state.photos.length; i++){\n      var photo = this.state.photos[i];\n      console.log(photo);\n      if (curr_header !== photo.SK.split(\"T\")[0]){\n        curr_header = photo.SK.split(\"T\")[0]\n        photo_groups.push({header: curr_header, photos: []});\n        groups++;\n      }\n      photo_groups[groups-1]['photos'].push(photo);\n    };\n\n    const listItems = photo_groups.map((photo_data) => (\n        <li key={photo_data.header}><PhotoGroup header={photo_data.header} data={photo_data.photos} photoFocusHandler={this.handlePhotoFocus}/></li>\n    ));\n\n    return (\n       <div>\n       <h1>Photos!</h1>\n        <PhotoFilterPane filterHandler={this.handleFilterUpdate}/>\n        <ul>\n          {listItems}\n        </ul>\n\n          <PhotoDetailModal\n            show={this.state.focusModalVisible}\n            onHide={this.closePhotoFocus}\n            photo={this.state.focusPhoto}\n          />\n\n      </div>\n    )\n  }\n}\n\nclass PhotoGroup extends React.Component{\n  constructor(props){\n    super(props);\n  }\n  render(){\n    const listItems = this.props.data.map((photo) =>\n      <li key={photo.SK}><Thumbnail data={photo} onClickHandler={this.props.photoFocusHandler}/> </li>\n    );\n    return(\n      <div>\n        <span>{this.props.header}</span>\n        <ul className=\"ul_thumbnail\">\n          {listItems}\n        </ul>\n      </div>\n    )\n  }\n}\n\nclass Thumbnail extends React.Component{\n  constructor(props){\n    super(props);\n    this.clickHandler = this.clickHandler.bind(this)\n    this.state = {};\n  }\n\n  clickHandler(){\n    this.props.onClickHandler(this.props.data)\n  }\n\n  render(){\n    return (\n        <img src={this.props.data.thumbnail_signed_url} alt=\"\" onClick={this.clickHandler}/>\n    );\n  }\n}\n\nclass PhotoFilterPane extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\"pane_open\": false, \"start_date\": \"\", \"end_date\": \"\"}\n    this.togglePane = this.togglePane.bind(this)\n    this.applyFilters = this.applyFilters.bind(this)\n    this.handleValueChanged = this.handleValueChanged.bind(this)\n  }\n\n  togglePane(){\n    this.setState({\n      \"pane_open\": !this.state.pane_open\n    })\n  }\n\n  applyFilters(){\n    let filter_params = this.state;\n    delete filter_params.pane_open\n    this.props.filterHandler(filter_params)\n  }\n\n  handleValueChanged(field, value){\n    console.log(field)\n    console.log(value)\n    this.setState({[field]: value})\n  }\n\n  render(){\n    const isPaneOpen = this.state.pane_open;\n    return (\n      <div>\n        <span>Filters<button onClick={this.togglePane}> {isPaneOpen ? '-' : '+'} </button></span>\n\n        {isPaneOpen &&\n          <div>\n            <table><tbody>\n              <tr>\n                <td> Start Date</td>\n                <td> End Date</td>\n              </tr>\n              <tr>\n                <td> <FilterControl field=\"start_date\" value={this.state.start_date} onValueChange={this.handleValueChanged} /> </td>\n                <td> <FilterControl field=\"end_date\" value={this.state.end_date} onValueChange={this.handleValueChanged} /> </td>\n              </tr>\n            </tbody></table>\n            <button onClick={this.applyFilters}> Apply </button>\n          </div>\n        }\n      </div>\n    )\n  }\n}\n\nclass FilterControl extends React.Component{\n  constructor(props){\n    super(props);\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(e){\n    this.props.onValueChange(this.props.field, e.target.value);\n  }\n\n  render(){\n    return(\n    <input value={this.props.value} onChange={this.handleChange} />\n  )\n  }\n}\n\nclass Galleries extends React.Component {\n  constructor(props){\n    super(props);\n  }\n\n  render() {\n    return <h1>Galleries!</h1>\n  }\n}\n\nclass Settings extends React.Component {\n  constructor(props){\n    super(props);\n  }\n\n  render() {\n    return (<h1>Settings!</h1>)\n  }\n}\n\nclass App extends React.Component {\n\n  checkSession = (session) => {\n    this.saveSession(session);\n  }\n\n  saveSession = (session) => {\n    console.log(\"Sign in success\");\n    console.log(session)\n    this.setState(session);\n  }\n\n  constructor(props){\n    super(props);\n    this.state = {view: \"Photos\"}\n\n    this.auth = new AmazonCognitoIdentity.CognitoAuth(authData);\n    this.auth.userhandler = {\n      onSuccess: this.checkSession,\n      onFailure: function(err) {\n        console.log(\"Error!\");\n        console.log(err)\n      }\n    };\n    this.auth.useCodeGrantFlow()\n    var curUrl = window.location.href;\n    this.auth.parseCognitoWebResponse(curUrl);\n\n\n  }\n\n  componentDidMount(){\n    if (this.auth.getCurrentUser()) {\n      this.auth.getSession();\n    }\n  }\n\n  viewChangeHandler=(view)=>{\n    this.setState({view})\n  }\n\n  buttonHandler=()=>{\n    if(this.state.accessToken){\n      this.auth.signOut()\n    } else {\n      this.auth.getSession()\n    }\n  }\n\n  render() {\n    const view = this.state.view;\n    console.log(this.state)\n    const activeSession = this.state.accessToken ? true : false\n    var jwt = \"\"\n    if (this.state.accessToken){\n      jwt = this.state.accessToken.jwtToken\n    }\n\n    return (\n        <div>\n          <button className=\"login\" onClick={this.buttonHandler}>{activeSession ? \"Logout\" : \"Login\"}</button>\n          {activeSession &&\n          <div>\n            <Header navHandler={this.viewChangeHandler} />\n            <Content view={view} jwt={jwt} />\n          </div>\n          }\n          <div id=\"modal-root\"></div>\n\n        </div>\n    )\n  }\n}\n\n//export default withAuthenticator(App);\nexport default App;\n",{"ruleId":"20","replacedBy":"21"},{"ruleId":"22","replacedBy":"23"},{"ruleId":"24","severity":1,"message":"25","line":19,"column":3,"nodeType":"26","messageId":"27","endLine":21,"endColumn":4},{"ruleId":"24","severity":1,"message":"25","line":55,"column":3,"nodeType":"26","messageId":"27","endLine":57,"endColumn":4},{"ruleId":"24","severity":1,"message":"25","line":71,"column":3,"nodeType":"26","messageId":"27","endLine":73,"endColumn":4},{"ruleId":"24","severity":1,"message":"25","line":202,"column":3,"nodeType":"26","messageId":"27","endLine":204,"endColumn":4},{"ruleId":"24","severity":1,"message":"25","line":309,"column":3,"nodeType":"26","messageId":"27","endLine":311,"endColumn":4},{"ruleId":"24","severity":1,"message":"25","line":319,"column":3,"nodeType":"26","messageId":"27","endLine":321,"endColumn":4},"no-native-reassign",["28"],"no-negated-in-lhs",["29"],"no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor","no-global-assign","no-unsafe-negation"]